CLO

MOV BL,50		; USTAWIENIE WSKAZNIKA NA PAMIEC TEKSTU

WPROWADZANIE_TEKSTU:
IN 00			; POBIERANIE LITERY OD UZYTKOWNIKA
MOV [BL],AL		; ZAPISYWANIE LITERY W PAMIECI
ADD BL,70		; STWORZENIE KOPII LITERY W INNYM OBSZARZE
MOV [BL],AL
SUB BL,70
INC BL			; PRZEJSCIE DO NASTEPEJ KOMORKI
CMP BL,55		; SPRAWDZENIE, CZY OSIAGNIECIE MAKSYMALNY ROZMIAR
JNZ WPROWADZANIE_TEKSTU	; JESLI NIE, KONTYNUUJEMY WCZYTYWANIE

MOV BL,60		; WSKAZNIK NA LISTE UKRYTYCH LITER

UKRYWANIE_LITER:
IN 00			; POBRANIE NUMERU LITERY, KTORA MA BYC ZAKRYTA
SUB AL,31		; KONWERSJA ASCII › LICZBA
MOV [BL],AL		; ZAPISANIE NUMERU W PAMIECI
INC BL			; PRZEJSCIE DO KOLEJNEJ KOMORKI
CMP BL,63		; SPRAWDZENIE PRZEKROCZENIA PAMIECI
JNZ UKRYWANIE_LITER	; JESLI NIE, PONAWIAMY

MASKOWANIE_LITER:
MOV AL,[60]		; POBRANIE NUMERU LITERY DO ZAKRYCIA
ADD AL,C0		; PRZESUNIECIE DO PAMIECI WYSWIETLACZA
MOV BL,2A		; ASCII '*'
MOV [AL],BL		; WPISANIE GWIAZDKI W ODPOWIEDNIE MIEJSCE

MOV AL,[61]		; MASKOWANIE KOLEJNYCH WYBRANYCH LITER
ADD AL,C0
MOV [AL],BL	

MOV AL,[62]
ADD AL,C0
MOV [AL],BL	

JMP PRZEJSCIE

ORG 63
PRZEJSCIE:

ZGADYWANIE:
MOV CL,C0		; WSKAZNIK NA WYSWIETLACZ
MOV DL,50		; WSKAZNIK NA TEKST

SPRAWDZANIE_LITER:
MOV BL,[CL]		; ODCZYTANIE ZNAKU Z EKRANU
CMP BL,2A		; SPRAWDZENIE, CZY TO GWIAZDKA
JZ WPISYWANIE_ZGADNIECIA	; JESLI TAK, PRZECHODZIMY DO ZGADYWANIA
INC DL
INC CL
CMP CL,C6		; SPRAWDZENIE KONCA SLOWA
JNZ SPRAWDZANIE_LITER	; JESLI NIE, KONTYNUUJEMY
JZ KONIEC		; JESLI TAK, KONCZYMY PROGRAM

WPISYWANIE_ZGADNIECIA:
IN 00			; WCZYTANIE ZGADYWANEJ LITERY
PUSH CL
MOV CL,[DL]		; POBRANIE ORYGINALNEJ LITERY
CMP AL,CL		; POROWNANIE
POP CL
JZ POPRAWNA_ODPOWIEDZ
JNZ WPISYWANIE_ZGADNIECIA

POPRAWNA_ODPOWIEDZ:
MOV AL,[DL]
MOV [CL],AL		; ODKRYCIE ZGADNIETEJ LITERY
INC DL
INC CL
CMP CL,C6		; SPRAWDZENIE, CZY SLOWO ZOSTALO ODGADNIETE
JNZ SPRAWDZANIE_LITER

KONIEC:
END
